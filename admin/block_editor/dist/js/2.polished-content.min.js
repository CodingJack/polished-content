(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{68:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(2),o=n.n(a),r=n(8),l=n.n(r),i=n(9),s=n.n(i),p=n(14),u=n.n(p),b=n(10),m=n.n(b),d=n(11),h=n.n(d),f=n(7),v=n.n(f),j=n(45),O=n(1),g=n(4),y=n.n(g),x=n(3);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}delete O.o.pcxLetterSpacing;var k=function(e,t){var n=j.a.globalTimeline,c=j.a.set;n.clear(),t&&c(e,{opacity:1,transform:"none","-webkit-filter":"none",filter:"none","clip-path":"none"})},w=function(e,t,n,c,a){if(n){var o="blur(".concat(t.blur,"px) grayscale(").concat(t.grayscale,")");e.style["-webkit-filter"]=o,e.style.filter=o}if("center-center"!==a){for(var r="inset(",l=0;l<4;l++)r+=c[l]?"".concat(t.clip,"% "):"0 ";e.style.clipPath="".concat(r.slice(0,-1),")")}},P=function(e,t,n){k(e,!0);var c,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.pcxDelay*=.001,a.pcxDuration*=.001,a.pcxEasing=(c="".concat(a.pcxEasing,".").concat(a.pcxEaseDirection))?-1!==c.search("Power0")?"none":c.toLowerCase().replace("ease","").replace("inout","inOut"):null,e.style.transformOrigin=a.pcxTransformOrigin.replace("-"," ");for(var r,l,i={},s={delay:a.pcxDelay},p={yoyo:!0,repeat:-1,repeatDelay:.75,delay:.2,ease:a.pcxEasing,duration:a.pcxDuration},u={x:0,y:0,yoyo:!0,repeat:-1,repeatDelay:.75,delay:.2,ease:a.pcxEasing,duration:a.pcxDuration},b=a.pcxClip,m=0,d=Object.entries(O.o);m<d.length;m++){var h=y()(d[m],2),f=h[0],v=h[1],g=v.prop,P=v.times;u[g]=a[f]*P}if(a.pcxPosition!==O.h.pcxPosition){var S=a.pcxPosition.split("-"),C=O.h.pcxPosition.split("-");if(S[0]!==C[0]||S[1]!==C[1]){var R=Object(x.h)(e,t,S[0],S[1],a.pcxStrength);u.x=R.x,u.y=R.y}}a.pcxBlur===O.h.pcxBlur&&a.pcxGrayscale===O.h.pcxGrayscale||(r=!0,p.blur=a.pcxBlur,i.blur=0,p.grayscale=.01*a.pcxGrayscale,i.grayscale=0,s.onUpdateParams=[e,i,r,l,b],s.onUpdate=w),"center-center"!==b&&(l=O.d[b],p.clip=100,i.clip=0,s.onUpdateParams=[e,i,r,l,b],s.onUpdate=w);var D=new(0,j.a.timeline)(s);D.from(e,u),D.from(i,p,0)},S=n(46),C=n.n(S),R=n(47),D=n.n(R),N=n(12),B=n.n(N),I=n(31);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,c=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return h()(this,n)}}var L=wp.element.Component,_=wp.compose.withInstanceId,A=wp.components,F=A.Button,T=A.NavigableMenu,G=function(e){var t=e.tabId,n=e.onClick,a=e.children,o=e.selected,r=D()(e,["tabId","onClick","children","selected"]);return Object(c.createElement)(F,C()({role:"tab",isSecondary:!0,tabIndex:o?null:-1,"aria-selected":o,id:t,onClick:n},r),a)},U=_(function(e){m()(n,e);var t=M(n);function n(){var e;return l()(this,n),(e=t.apply(this,arguments)).handleClick=e.handleClick.bind(u()(e)),e.onNavigate=e.onNavigate.bind(u()(e)),e}return s()(n,[{key:"handleClick",value:function(e){var t=this.props.onSelect;(void 0===t?I.noop:t)(e)}},{key:"onNavigate",value:function(e,t){t.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.activeClass,a=void 0===n?"is-active":n,r=t.className,l=t.instanceId,i=t.currentTab,s=t.orientation,p=void 0===s?"horizontal":s,u=t.tabs,b=Object(I.find)(u,{name:i}),m=l+"-"+b.name;return Object(c.createElement)("div",{className:r},Object(c.createElement)(T,{role:"tablist",orientation:p,onNavigate:this.onNavigate,className:"components-tab-panel__tabs"},u.map((function(t){return Object(c.createElement)(G,{className:B()(t.className,o()({},a,t.name===i)),isSecondary:t.name!==i,isPrimary:t.name===i,tabId:l+"-"+t.name,"aria-controls":l+"-"+t.name+"-view",selected:t.name===i,key:t.name,onClick:Object(I.partial)(e.handleClick,t.name)},t.title)}))),b&&Object(c.createElement)("div",{"aria-labelledby":m,role:"tabpanel",id:m+"-view",className:"components-tab-panel__tab-content",tabIndex:"0"},this.props.children(b)))}}]),n}(L)),z=n(13),W=n(17),X=wp.components,Y=X.ButtonGroup,V=X.Button,q=O.m.pcxPosition,J=function(e){var t=e.prop,n=e.value,a=e.callback;return Object(c.createElement)("div",{className:"".concat(O.j,"-points")},Object(c.createElement)(Y,null,q.map((function(e){return Object(c.createElement)(V,{isSmall:!0,key:e,className:"".concat(O.j,"-position-btn"),isSecondary:n!==e,isPrimary:n===e,onClick:function(){return a(e,t)}})}))))},Z=n(5),K=wp.i18n.__,$=wp.components.PanelRow,H=function(e){var t=e.block,n=t.props,a=t.updateProp,o=n.pcxOpacity,r=n.pcxBlur,l=n.pcxGrayscale,i=n.pcxZoom,s=n.pcxStrength,p=n.pcxPosition,u=n.pcxClip,b=n.pcxMask;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(z.a,{prop:"pcxOpacity",label:K("Opacity","polished-content"),value:o,callback:a}),Object(c.createElement)(z.a,{prop:"pcxBlur",label:K("Blur","polished-content"),value:r,callback:a,max:30,step:1}),Object(c.createElement)(z.a,{prop:"pcxGrayscale",label:K("Grayscale","polished-content"),value:l,callback:a}),Object(c.createElement)(z.a,{prop:"pcxZoom",label:K("Zoom","polished-content"),value:i,callback:a,max:300}),Object(c.createElement)("div",{className:"".concat(O.j,"-positions polished-content-position-first")},Object(c.createElement)($,null,Object(c.createElement)(W.a,{prop:"pcxStrength",label:K("Movements","polished-content"),value:s,callback:a,buttons:!0}),Object(c.createElement)(J,{prop:"pcxPosition",value:p,callback:a}))),Object(c.createElement)("div",{className:"".concat(O.j,"-positions")},Object(c.createElement)($,null,Object(c.createElement)(W.a,{label:K("Content Wipes","polished-content"),prop:"pcxClip",value:u,callback:a}),Object(c.createElement)(J,{prop:"pcxClip",value:u,callback:a}))),Object(c.createElement)(Z.a,{prop:"pcxMask",label:K("Content Mask","polished-content"),checked:b,callback:a,help:K("Useful for Blur Filter and Movements without 3D Rotations but may impact collapsing margins","polished-content")}))},Q=wp.components,ee=Q.Button,te=Q.Icon,ne=wp.element.useState,ce=function(e){var t=e.prop,n=e.label,a=e.value,o=e.help,r=e.validity,l=e.callback,i=e.defValue,s=e.min,p=void 0===s?0:s,u=e.max,b=void 0===u?100:u,m=e.type,d=void 0===m?"number":m,h=ne(a),f=y()(h,2),v=f[0],j=f[1],g=a===O.h[t];return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"".concat(O.j,"-wrapper ").concat(O.j,"-text-input")},Object(c.createElement)("div",{className:"components-base-control"},Object(c.createElement)("div",{className:"components-base-control__field"},Object(c.createElement)("label",{className:"components-base-control__label",htmlFor:"inspector-select-control-".concat(t)},n),Object(c.createElement)("input",{name:t,className:"components-text-control__input",type:d,"aria-label":n,onChange:function(e){var n=e.target.value;"number"===d&&(n=parseInt(n,10),isNaN(n)&&(n="")),l(n,t)},onFocus:function(e){j(e.target.value)},onBlur:function(e){var n=e.target.value;if("number"===d){var c=parseInt(n,10);(isNaN(c)||c<p||c>b)&&l(v,t)}else"class"!==r||""===n||/^[a-z _-][a-z \d_-]*$/i.test(n)||l(v,t)},value:a})),o&&Object(c.createElement)("p",{className:"components-base-control__help"},o)),"number"===d&&Object(c.createElement)("div",{className:"".concat(O.j,"-small-btns")},Object(c.createElement)(ee,{isSmall:!0,isSecondary:!0,className:"".concat(O.j,"-iconbtn"),disabled:g,onClick:function(){var e=void 0===i?O.h[t]:i;l(e,t)}},Object(c.createElement)(te,{icon:"no-alt",size:"12"})))))},ae=wp.element.useState,oe={text:ce,range:z.a},re=function(e){var t=e.prop,n=e.label,a=e.customLabel,o=e.value,r=e.callback,l=e.custom,i=e.help,s=e.min,p=void 0===s?100:s,u=e.max,b=void 0===u?9999:u,m=e.step,d=void 0===m?1:m,h=e.defValue,f=void 0===h?"1000":h,v=e.component,j=void 0===v?"text":v,g=e.type,x=void 0===g?"number":g,E=oe[j],k=O.m[t].map((function(e){return e.value})),w=-1!==k.indexOf(o)&&o!==l,P=w?o:l,S=ae(w?f:o),C=y()(S,2),R=C[0],D=C[1],N=ae(!w),B=y()(N,2),I=B[0],M=B[1],L=function(e){var n=e.toString();n===l?I||(D(n=R),M(!0)):-1!==k.indexOf(n)?M(!1):D(n),r(n,t)};return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(W.a,{prop:t,label:n,value:P,callback:L,help:I?null:i}),I&&Object(c.createElement)(E,{type:x,prop:t,label:a,value:R,defValue:f,callback:L,min:p,max:b,step:d}))},le=n(6),ie=wp.i18n.__,se=wp.components.PanelRow,pe=function(e){var t,n=e.block,a=n.props,o=n.updateProp,r=a.pcxLetterSpacing,l=a.pcxRotate,i=a.pcxRotateX,s=a.pcxRotateY,p=a.pcxSkewX,u=a.pcxSkewY,b=a.pcxTransformOrigin,m=a.pcxPerspective,d=a.pcxTransformReset;r>0&&(t=ie("Letter Spacing is only compatible with text that would normally always appear on a single line","polished-content"));var h=m.toString().replace("vw",""),f=ie("vw would equal","polished-content"),v=ie("% of the screen's width","polished-content"),j="".concat(h).concat(f," ").concat(h).concat(v);return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(z.a,{prop:"pcxLetterSpacing",label:ie("Letter Spacing","polished-content"),value:r,callback:o,min:0,max:100,step:1,help:t}),Object(c.createElement)(z.a,{prop:"pcxRotate",label:ie("2D Rotation","polished-content"),value:l,callback:o,min:-360,max:360}),Object(c.createElement)(z.a,{prop:"pcxRotateX",label:ie("3D RotationX","polished-content"),value:i,callback:o,min:-360,max:360}),Object(c.createElement)(z.a,{prop:"pcxRotateY",label:ie("3D RotationY","polished-content"),value:s,callback:o,min:-360,max:360}),Object(c.createElement)(z.a,{prop:"pcxSkewX",label:ie("SkewX","polished-content"),value:p,callback:o,min:-180,max:180}),Object(c.createElement)(z.a,{prop:"pcxSkewY",label:ie("SkewY","polished-content"),value:u,callback:o,min:-180,max:180}),Object(c.createElement)("div",{id:"".concat(O.j,"-transform-origin-wrap"),className:"".concat(O.j,"-positions polished-content-position-first")},Object(c.createElement)(se,null,Object(c.createElement)(W.a,{prop:"pcxTransformOrigin",label:ie("Transform Origin","polished-content"),value:b,callback:o}),Object(c.createElement)(J,{prop:"pcxTransformOrigin",value:b,callback:o}))),Object(c.createElement)(re,{prop:"pcxPerspective",label:ie("3D Perspective","polished-content"),customLabel:ie("Custom 3D Perspective","polished-content"),value:m,callback:o,custom:"custom",component:"range",min:200,max:5e3,step:50,help:j}),Object(c.createElement)(re,{prop:"pcxTransformReset",label:ie("Reset Transform Origin at...","polished-content"),customLabel:ie("Transform Origin Reset Width","polished-content"),value:d,callback:o,custom:"custom",component:"text",help:Object(c.createElement)(le.a,{text:ie("Reset transform-origin to center at a certain screen width set in the ","polished-content")})}))},ue=wp.i18n.__,be=wp.components.PanelRow,me=function(e){var t,n=e.block,a=n.props,o=n.updateProp,r=a.pcxReverse,l=a.pcxDuration,i=a.pcxDelay,s=a.pcxDelayReverse,p=a.pcxDelayBreak,u=a.pcxEasing,b=a.pcxEaseDirection,m=a.pcxEaseReverse,d=a.pcxScrollType;return("Back"===u||"Elastic"===u)&&r&&"in"!==d&&(t=ue('This easing function can be visually glitchy when combined with the "Auto Reverse" option',"polished-content")),Object(c.createElement)(c.Fragment,null,Object(c.createElement)(W.a,{prop:"pcxEasing",label:ue("Easing Function","polished-content"),value:u,callback:o,help:t}),Object(c.createElement)(ce,{prop:"pcxDuration",label:ue("Animation Duration (ms)","polished-content"),value:l,callback:o,min:200,max:5e4,step:50}),Object(c.createElement)(W.a,{prop:"pcxEaseDirection",label:ue("Easing Type","polished-content"),value:b,callback:o}),Object(c.createElement)("div",{className:"".concat(O.j,"-spacer")},Object(c.createElement)(be,null,Object(c.createElement)(ce,{prop:"pcxDelay",label:ue("Timing Delay","polished-content"),value:i,callback:o,min:0,max:1e4,step:50}),Object(c.createElement)(ce,{prop:"pcxDelayReverse",label:ue("Reverse Delay","polished-content"),value:s,callback:o,min:0,max:1e4,step:50}))),Object(c.createElement)(re,{prop:"pcxDelayBreak",label:ue("Disable Delays at...","polished-content"),customLabel:ue("Disable Delay Width","polished-content"),value:p,callback:o,component:"text",custom:"custom",help:Object(c.createElement)(le.a,{text:ue("Remove delays at a certain viewport width set in the plugin's","polished-content")})}),"easeInOut"!==b&&Object(c.createElement)(Z.a,{prop:"pcxEaseReverse",label:ue("Reverse Easing","polished-content"),checked:m,callback:o,help:ue("easeOut will become easeIn when animating out and vice versa","polished-content")}))},de=wp.components,he=de.ButtonGroup,fe=de.Button,ve=de.Icon,je=polishedContentGlobals.isRtl,Oe=O.m.pcxAlign,ge=O.m.pcxAlignRtl,ye=je?ge:Oe,xe=function(e){var t=e.prop,n=e.value,a=e.callback;return Object(c.createElement)("div",{className:"".concat(O.j,"-align-btns")},Object(c.createElement)(he,null,ye.map((function(e){return Object(c.createElement)(fe,{key:e,className:"".concat(O.j,"-align-btn is-button is-default"),isSecondary:n!==e,isPrimary:n===e,onClick:function(){return a(e,t)}},Object(c.createElement)(ve,{icon:"editor-align".concat(e),size:"20"}))}))))},Ee=wp.i18n.__,ke=wp.components,we=ke.TextControl,Pe=ke.ToggleControl,Se=wp.element.useState,Ce=function(e){var t,n,a,o=e.block,r=Se(!1),l=y()(r,2),i=l[0],s=l[1],p="";if(i){var u=o.props,b={};Object.keys(O.h).forEach((function(e){b[e]=u[e]}));var m=Object(x.f)(b),d=m.classes;t=m.animate?"polished-content".concat(d):"",p=" ".concat(O.j,"-classes-enabled"),n=function(){},a=function(e){return e.target.select()}}return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(Pe,{label:Ee("Copy Animation Classes","polished-content"),className:"".concat(O.j,"-toggle-classes").concat(p),checked:i,onChange:function(e){return s(e)},help:Ee("Add these classes to any of your site's page/post content to animate it with the current settings","polished-content")}),i&&Object(c.createElement)(we,{label:"Current Animation Classes",className:"".concat(O.j,"-text-input"),value:t,onChange:n,onFocus:a,help:Object(c.createElement)(le.a,{text:Ee("When adding animation classes to non-Block content the plugin's script can be loaded manually from the ","polished-content")})}))},Re=wp.i18n.__,De=function(e){var t=e.block,n=t.props,a=t.updateProp,o=n.pcxInherit,r=n.pcxAlign,l=n.pcxInline,i=n.pcxFloat,s=n.pcxClass;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(Z.a,{prop:"pcxInherit",label:Re("Inherit Margins","polished-content"),checked:o,callback:a,help:Re("Removes margins from the Block allowing the animated wrapper to inherit them instead.","polished-content")}),Object(c.createElement)(Z.a,{prop:"pcxInline",label:Re("Animate as Inline Block","polished-content"),checked:l,callback:a,help:Re("Useful for Buttons and other content that is not intended to appear full-width.","polished-content")}),l&&Object(c.createElement)(xe,{prop:"pcxAlign",value:r,callback:a}),Object(c.createElement)(W.a,{prop:"pcxFloat",label:Re("CSS Float","polished-content"),value:i,callback:a,help:Re("Useful if your content is normally meant to display inline","polished-content")}),Object(c.createElement)(ce,{type:"text",validity:"class",prop:"pcxClass",label:Re("Wrapper Class","polished-content"),value:s,callback:a,help:Re("Add an optional class name to the animation's outer wrapper","polished-content")}),Object(c.createElement)(Ce,{block:t}))},Ne=wp.i18n.__,Be=[{slug:"basics",icon:"admin-settings",component:H},{slug:"advanced",icon:"admin-plugins",component:pe},{slug:"timing",icon:"dashboard",component:me},{slug:"formatting",icon:"art",component:De},{slug:"settings",icon:"admin-generic",component:function(e){var t=e.block,n=t.props,a=t.updateProp,o=n.pcxScrollType,r=n.pcxPercentageIn,l=n.pcxScrollStagger,i=n.pcxPercentageInStagger,s=n.pcxReverse,p=n.pcxDesktop,u=n.pcxLaptop,b=n.pcxTablet,m=n.pcxSmartphone;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(W.a,{prop:"pcxScrollType",label:Ne("Animate Content","polished-content"),value:o,callback:a}),!l&&Object(c.createElement)(z.a,{prop:"pcxPercentageIn",label:Ne("Percentage In View","polished-content"),value:r,callback:a,max:50,step:1,help:Ne("Animate when inside this percentage of the screen's viewport","polished-content")}),l&&Object(c.createElement)(z.a,{prop:"pcxPercentageInStagger",label:Ne("Stagger % In View","polished-content"),value:i,callback:a,max:25,step:1,help:Ne("Animate when inside this percentage of the screen's viewport","polished-content")}),"in"!==o&&Object(c.createElement)(Z.a,{prop:"pcxReverse",label:Ne("Auto Reverse","polished-content"),className:"".concat(O.j,"-scroll-option"),checked:s,callback:a,help:Ne("Movements, wipes, rotations and skews will be reversed when scrolled up and out of view","polished-content")}),Object(c.createElement)(Z.a,{prop:"pcxScrollStagger",label:Ne("Stagger on Scroll","polished-content"),className:"".concat(O.j,"-scroll-option"),checked:l,callback:a,help:Ne("The block will animate in relation to the page's scroll position","polished-content")}),Object(c.createElement)("div",{className:"".concat(O.j,"-viewports")},Object(c.createElement)("label",{htmlFor:"pcxDesktop"},Ne("Enable/Disable Animation for...","polished-content")),Object(c.createElement)(Z.a,{prop:"pcxDesktop",label:Object(c.createElement)(le.b,{title:Ne("Desktop","polished-content"),index:0}),checked:p,callback:a}),Object(c.createElement)(Z.a,{prop:"pcxLaptop",label:Object(c.createElement)(le.b,{title:Ne("Laptop","polished-content"),index:1}),checked:u,callback:a}),Object(c.createElement)(Z.a,{prop:"pcxTablet",label:Object(c.createElement)(le.b,{title:Ne("Tablet","polished-content"),index:2}),checked:b,callback:a}),Object(c.createElement)(Z.a,{prop:"pcxSmartphone",label:Object(c.createElement)(le.b,{title:Ne("Smartphone","polished-content"),index:3}),checked:m,callback:a,help:Object(c.createElement)(le.a,{text:Ne("Viewport widths can be adjusted from the plugin's","polished-content")})})))}}],Ie=function(e){var t=e.block,n=t.currentTab,a=t.updateState;return Object(c.createElement)(U,{className:"".concat(O.j,"-tabs components-button-group"),activeClass:"is-primary",currentTab:"".concat(O.j,"-").concat(n),onSelect:function(e){var t=e.replace("".concat(O.j,"-"),"");a({currentTab:t},(function(){polishedContentGlobals.currentTab=t}))},tabs:Be.map((function(e){return function(e,t){var n=e.slug,a=e.icon,o=e.component;return{name:"".concat(O.j,"-").concat(n),className:"is-button is-default is-small dashicons dashicons-".concat(a),container:Object(c.createElement)("div",{className:"".concat(O.j,"-tab ").concat(O.j,"-").concat(n,"-tab")},Object(c.createElement)(o,{block:t}))}}(e,t)}))},(function(e){return e.container}))},Me=n(34),Le=n.n(Me),_e=n(43),Ae=n.n(_e);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}var Te=wp.i18n.__,Ge=wp.components,Ue=Ge.Button,ze=Ge.IconButton,We=Ge.Spinner,Xe=wp.element.useState,Ye=polishedContentGlobals.ajaxNonce,Ve=function(e){var t=e.block,n=Xe(!0),a=y()(n,2),r=a[0],l=a[1],i=Xe(""),s=y()(i,2),p=s[0],u=s[1],b=t.state,m=t.updateState,d=b.rcMenuActive;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"".concat(O.j,"-save-preset")},Object(c.createElement)("div",null,Object(c.createElement)("input",{type:"text",className:"".concat(O.j,"-preset-name"),onChange:function(e){return u(e.target.value)},onKeyUp:function(e){return l(!e.target.value)},placeholder:Te("Custom Preset Name","polished-content"),ref:function(e){return!d&&e&&e.focus()}}),Object(c.createElement)(Ue,{className:"".concat(O.j,"-save-btn"),isPrimary:!0,disabled:r,onClick:function(){p&&"undefined"!=typeof ajaxurl&&m({ajaxLoading:!0},(function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.props);Object.keys(e).forEach((function(t){void 0!==O.h[t]&&e[t]!==O.h[t]||delete e[t]}));var n=function(){m({ajaxLoading:!1,showSavePresetModal:!1})};Le.a.post(ajaxurl,Ae.a.stringify({action:"polished_content",nonce:Ye,addremove:"add",name:p,settings:JSON.stringify(e)})).then((function(t){"success"===t.data?Object(x.a)(p,e):console.log(t),n()})).catch((function(){console.log(Te("Polished Content Ajax Request Failed","polished-content")),n()}))}))}},Object(c.createElement)("span",{className:"".concat(O.j,"-save-text")},Te("Save Preset","polished-content"),Object(c.createElement)(We,null)))),Object(c.createElement)(ze,{className:"".concat(O.j,"-mini-icon"),icon:"no",size:"24",onClick:function(){return m({showSavePresetModal:!1})}})))};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=wp.i18n.__,Ke=wp.components,$e=Ke.Button,He=Ke.Icon,Qe=wp.element.forwardRef,et=polishedContentGlobals.isRtl,tt=Qe((function(e,t){var n,a,o=e.block,r=o.props,l=o.state,i=o.updateState,s=o.updateFromPreset,p=r.pcxMask,u=r.pcxGrayscale,b=l.selectedPreset,m=l.hideCreatePresetBtn,d=l.showSavePresetModal,h=t.el,f=t.container,v=l.previewIsPlaying,j=O.m.pcxPresets,g=j.map((function(e){return e.value})),y=p?" pcx-has-mask":"",E=v?" is-playing":"",k=parseInt(u,10)>0?" pcx-grayscale":"",w="PcxDefaults"!==b&&!Object(x.m)(Je({},r)),P=d||w;return"1"!==et?(n="left",a="right"):(n="right",a="left"),Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"".concat(O.j,"-wrap")},Object(c.createElement)("div",{className:"".concat(O.j,"-preview-wrap"),ref:f},Object(c.createElement)("div",{className:"".concat(O.j,"-preview-container").concat(y).concat(k)},Object(c.createElement)("span",{className:"".concat(O.j,"-preview-el"),ref:h},Object(c.createElement)(He,{icon:"text",size:"72"})),k&&Object(c.createElement)("svg",{className:"".concat(O.j,"-gradient"),xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 20 20"},Object(c.createElement)("defs",null,Object(c.createElement)("linearGradient",{id:"".concat(O.j,"-linear"),x1:"0",x2:"0",y1:"0",y2:"1"},Object(c.createElement)("stop",{offset:"0%",stopColor:"#59253a"}),Object(c.createElement)("stop",{offset:"25%",stopColor:"#59253a"}),Object(c.createElement)("stop",{offset:"25%",stopColor:"#895061"}),Object(c.createElement)("stop",{offset:"50%",stopColor:"#895061"}),Object(c.createElement)("stop",{offset:"50%",stopColor:"#0677a1"}),Object(c.createElement)("stop",{offset:"75%",stopColor:"#0677a1"}),Object(c.createElement)("stop",{offset:"75%",stopColor:"#2d4159"}),Object(c.createElement)("stop",{offset:"100%",stopColor:"#2d4159"})))))),d&&Object(c.createElement)(Ve,{block:o})),Object(c.createElement)($e,{isSmall:!0,isPrimary:!0,className:"".concat(O.j,"-iconbtn"),onClick:function(){var e=Object(x.j)(j,g,b);s(e)}},Object(c.createElement)(He,{icon:"arrow-".concat(n,"-alt2"),size:"16"})),Object(c.createElement)($e,{isSmall:!0,isPrimary:!P,isSecondary:P,disabled:P,className:"".concat(O.j,"-playpause ").concat(O.j,"-iconbtn").concat(E),onClick:function(){if("PcxDefaults"!==b)i((function(e){return{previewIsPlaying:!e.previewIsPlaying}}));else{var e=Object(x.j)(j,g,"PcxDefaults",!0);if("PcxCustom"===e){var t=O.m.pcxAnimations,n=Je(Je({},O.h),t[e]);Object(x.m)(Je({},n))||(e=Object(x.j)(j,g,e,!0))}s(e)}}},Object(c.createElement)(He,{icon:"controls-play",size:"16"}),Object(c.createElement)(He,{icon:"controls-pause",size:"16"})),Object(c.createElement)($e,{isSmall:!0,isPrimary:!0,className:"".concat(O.j,"-iconbtn"),onClick:function(){var e=Object(x.j)(j,g,b,!0);s(e)}},Object(c.createElement)(He,{icon:"arrow-".concat(a,"-alt2"),size:"16"})),Object(c.createElement)($e,{isSmall:!0,isSecondary:!0,className:"".concat(O.j,"-create-preset"),onClick:function(){i({previewIsPlaying:!1,showSavePresetModal:!0})},"aria-disabled":m||d}," ",Ze("Create Preset","polished-content")))}));function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}var ct=wp.i18n.__,at=wp.components.IconButton,ot=polishedContentGlobals.ajaxNonce,rt=function(e){var t=e.block,n=t.state,a=t.updateFromPreset,r=n.hideDeleteBtn,l=n.selectedPreset,i={visibility:r?"hidden":"visible"};return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"".concat(O.j,"-presets")},Object(c.createElement)(W.a,{label:"Settings from Preset",prop:"pcxPresets",value:l,callback:a,buttons:!1}),Object(c.createElement)(at,{className:"".concat(O.j,"-delete ").concat(O.j,"-iconbtn is-button is-default is-small"),style:i,icon:"no-alt",onClick:function(){if("undefined"!=typeof ajaxurl&&window.confirm(ct("Delete this Custom Preset Option?","polished-content"))){var e=t.updateState,n=function(){e({ajaxLoading:!1,showSavePresetModal:!1})};e({ajaxLoading:!0},(function(){Le.a.post(ajaxurl,Ae.a.stringify({action:"polished_content",nonce:ot,addremove:"remove",name:l})).then((function(e){if("success"===e.data){var c=t.props;Object(x.l)(l,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c))}else console.log(e);n()})).catch((function(){console.log(ct("Polished Content Ajax Request Failed","polished-content")),n()}))}))}}})))},lt=(0,wp.element.forwardRef)((function(e,t){var n=e.block;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(tt,{block:n,ref:t}),Object(c.createElement)(rt,{block:n}))})),it=wp.i18n.__,st=wp.components.Button,pt=function(e){var t=e.onClear,n=e.onUndo,a=e.originalSettings;return t||n?Object(c.createElement)("div",{className:"".concat(O.j,"-reset-btns")},t&&Object(c.createElement)(st,{isSmall:!0,isSecondary:!0,onClick:t}," ",it("Reset to Defaults","polished-content")),n&&Object(c.createElement)(st,{isSmall:!0,isSecondary:!0,onClick:function(){n(!1,a)}}," ",it("Undo All Changes","polished-content"))):null};function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,c=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return h()(this,n)}}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}var mt=wp.element,dt=mt.Component,ht=mt.createRef,ft=function(e,t,n){O.k[e].forEach((function(e){n[e]=t[e]}))},vt=function(e){var t=e.attrs,n=e.hideRightClickMenu,a=e.updateState,r=e.updateBatchProps,l=polishedContentGlobals,i=l.copiedPanel,s=l.copiedSettings,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},O.l);return s||delete p.paste,Object.keys(p).map((function(e,o){var l,s=p[e],u=function(){switch(e){case"all":l={},Object.keys(O.k).forEach((function(e){ft(e,t,l)}));break;case"paste":r(),i&&a({currentTab:i});break;case"disable":return void n(!1,!0);default:ft(e,t,l={})}l&&(polishedContentGlobals.copiedSettings=l,polishedContentGlobals.copiedPanel="all"!==e&&"paste"!==e?e:null),n()};return Object(c.createElement)("div",{role:"button",tabIndex:o,key:"".concat(O.j,"-rc-item-").concat(e),className:"".concat(O.j,"-rc-menu-itm"),onClick:u,onKeyDown:function(e){13===e.which&&u()}},Object(c.createElement)("span",{className:"dashicons dashicons-".concat(s.icon)}),Object(c.createElement)("span",{className:"".concat(O.j,"-rc-menu-text")},s.text))}))},jt=function(e){m()(n,e);var t=ut(n);function n(){var e;return l()(this,n),(e=t.apply(this,arguments)).ref=ht(),e}return s()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.wrap,n=e.rcEvent,c=e.menuBuffer,a=n.clientX,o=n.clientY,r=this.ref.current,l=r.getBoundingClientRect(),i=t.getBoundingClientRect(),s=l.width,p=l.height,u=i.top,b=i.left,m=i.width,d=i.height,h=a-b,f=o-u,v=h+s<m+c?h:h-s,j=f+p<d?f:f-p;v=Math.max(0,v),v=Math.min(v,m-s),j=Math.max(0,j),j=Math.min(j,d-p),r.style.left="".concat(v,"px"),r.style.top="".concat(j,"px"),r.style.visibility="visible"}},{key:"componentWillUnmount",value:function(){this.ref=null}},{key:"render",value:function(){return Object(c.createElement)("div",{className:"".concat(O.j,"-rc-menu"),ref:this.ref},Object(c.createElement)(vt,this.props))}}]),n}(dt);function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,c=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return h()(this,n)}}var xt=wp.element,Et=xt.Component,kt=xt.createRef,wt=wp.i18n.__,Pt=function(e){m()(n,e);var t=yt(n);function n(){var e;l()(this,n);var c=(e=t.apply(this,arguments)).props.attributes,a=c.pcxEnabled,o=Object(x.i)(gt({},c),!0),r=o.selectedPreset;Object(x.d)(a,r);var i=polishedContentGlobals,s=i.currentTab;return e.state=gt({currentTab:s,ajaxLoading:!1,rcMenuActive:!1,previewIsPlaying:!1,showSavePresetModal:!1},o),e.animatedElements={el:kt(),container:kt()},e.settingsRef=kt(),e.updateProp=e.updateProp.bind(u()(e)),e.updateState=e.updateState.bind(u()(e)),e.restoreProperties=e.restoreProperties.bind(u()(e)),e.updateFromPreset=e.updateFromPreset.bind(u()(e)),e.updateBatchProps=e.updateBatchProps.bind(u()(e)),e.onRightClick=e.onRightClick.bind(u()(e)),e.hideRightClickMenu=e.hideRightClickMenu.bind(u()(e)),e.hideClearBtn=!Object(x.c)(gt({},O.h),gt({},c)),e.originalSettings=Object(x.g)(gt({},c)),e}return s()(n,[{key:"updateState",value:function(e,t){this.setState(e,t)}},{key:"updateProps",value:function(e){var t=this,n=this.props.attributes;Object(x.b)(gt({},e))&&Object(x.m)(gt(gt({},n),e))?this.setState({bounce:!0,previewIsPlaying:!0},(function(){t.props.setAttributes(gt({},e))})):this.props.setAttributes(gt({},e))}},{key:"updateProp",value:function(e,t){"pcxEnabled"===t&&(e?this.addRightClickListener():this.removeAllRcListeners()),this.updateProps(o()({},t,e))}},{key:"updateBatchProps",value:function(){var e=polishedContentGlobals.copiedSettings;this.updateProps(gt({},e))}},{key:"updateFromPreset",value:function(e){var t=O.m.pcxAnimations,n=gt(gt({},O.h),t[e]);this.updateProps(gt({},n))}},{key:"restoreProperties",value:function(e,t){var n=t||O.h;this.updateProps(gt({},n))}},{key:"componentDidUpdate",value:function(e,t){var n=this.animatedElements,c=n.el,a=n.container,o=c.current,r=a.current;if(o&&r){var l=this.state.previewIsPlaying;if(l){var i=this.props.attributes,s=e.attributes,p=l!==t.previewIsPlaying;if(p||(p=Object(x.e)(gt({},s),gt({},i))),p)P(o,r,gt(gt({},O.h),i));else Object(x.m)(gt({},i))||k(o,!0)}else k(o,!0)}}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.attributes,c=e.attributes,a=Object(x.k)(gt({},this.state),gt({},t)),o=Object(x.k)(gt({},n),gt({},c),O.a.slice());return!a||!o}},{key:"hideRightClickMenu",value:function(e,t){if(e)if("contextmenu"===e.type){this.state.rcMenuActive||e.preventDefault()}else{var n="".concat(O.j,"-rc-menu-itm"),c=e.target;if(c.classList.contains(n)||c.closest(".".concat(n)))return}t?this.removeAllRcListeners():this.removeBodyRcListeners(),this.removeBodyRcListeners(),this.setState({rcMenuActive:!1})}},{key:"onRightClick",value:function(e){var t=this,n=e.target;if("input"!==n.tagName.toLowerCase()||"text"!==n.type){var c=this.state,a=c.rcMenuActive;if(c.showSavePresetModal){var o="".concat(O.j,"-save-preset");if(n.classList.contains(o)||n.closest(".".concat(o)))return}if(e.preventDefault(),e.stopImmediatePropagation(),a)return this.removeBodyRcListeners(),void this.setState({rcMenuActive:!1},(function(){t.onRightClick(e)}));document.body.addEventListener("click",this.hideRightClickMenu),document.body.addEventListener("contextmenu",this.hideRightClickMenu),this.setState({rcMenuActive:!0,rcEvent:e})}}},{key:"addRightClickListener",value:function(){var e=this.settingsRef.current;e&&e.addEventListener("contextmenu",this.onRightClick)}},{key:"removeBodyRcListeners",value:function(){document.body.removeEventListener("click",this.hideRightClickMenu),document.body.removeEventListener("contextmenu",this.hideRightClickMenu)}},{key:"removeAllRcListeners",value:function(){this.removeBodyRcListeners();var e=this.settingsRef.current;e&&e.removeEventListener("contextmenu",this.onRightClick)}},{key:"componentDidMount",value:function(){this.props.attributes.pcxEnabled&&this.addRightClickListener()}},{key:"componentWillUnmount",value:function(){j.a.globalTimeline.clear(),this.removeAllRcListeners(),this.settingsRef=null,this.animatedElements=null}},{key:"render",value:function(){var e=this.state,t=this.props,n=this.updateProp,a=this.updateState,o=this.settingsRef,r=this.hideClearBtn,l=this.hideRightClickMenu,i=this.restoreProperties,s=this.updateFromPreset,p=this.animatedElements,u=this.originalSettings,b=this.updateBatchProps,m=e.rcEvent,d=e.currentTab,h=e.rcMenuActive,f=e.ajaxLoading,v=e.selectedPreset,j=t.attributes,g=j.pcxEnabled,y=o.current,E={currentTab:d,updateProp:n,updateState:a,updateFromPreset:s,state:gt({},e),props:gt(gt({},O.h),j)},k=f?" pcx-ajax-loading":"",w=!r&&"PcxDefaults"!==v&&i,P=!!Object(x.c)(gt({},u),gt({},j),gt({},O.h))&&i;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"".concat(O.j,"-settings").concat(k),ref:o},Object(c.createElement)(Z.a,{prop:"pcxEnabled",label:wt("Enable/Disable","polished-content"),checked:g,callback:n}),g&&Object(c.createElement)(c.Fragment,null,Object(c.createElement)(lt,{block:E,ref:p}),Object(c.createElement)("hr",null),Object(c.createElement)(Ie,{block:E}),Object(c.createElement)(pt,{onClear:w,onUndo:P,originalSettings:gt({},u)}),h&&y&&Object(c.createElement)(jt,{wrap:y,rcEvent:m,attrs:E.props,menuBuffer:16,hideRightClickMenu:l,updateState:a,updateBatchProps:b}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(t.bounce)return{bounce:!1};var n=e.attributes,c=Object(x.i)(gt({},n)),a=c.hideCreatePresetBtn,o=t.previewIsPlaying,r=t.showSavePresetModal;o&&(Object(x.m)(gt({},n))||(c.previewIsPlaying=!1));return r&&a&&(c.showSavePresetModal=!1),gt({},c)}}]),n}(Et);t.default=function(e){return Object(c.createElement)(Pt,e)}}}]);